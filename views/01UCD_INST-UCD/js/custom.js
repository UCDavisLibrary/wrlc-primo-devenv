!function n(a,i,o){function l(t,e){if(!i[t]){if(!a[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=i[t]={exports:{}},a[t][0].call(r.exports,function(e){return l(a[t][1][e]||e)},r,r.exports,n,a,i,o)}return i[t].exports}for(var c="function"==typeof require&&require,e=0;e<o.length;e++)l(o[e]);return l}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){e.value("searchTargets",[{name:"Worldcat",url:"https://110105.on.worldcat.org/v2/search?",img:"custom/01UCD_INST-UCD/img/worldcat-logo.png",alt:"WorldCat logo",mapping:function(e,t){var r={any:"kw",title:"ti",creator:"au",subject:"su",isbn:"bn",issn:"n2"};try{return"queryString="+e.map(function(e){e=e.split(",");return(r[e[0]]||"kw")+":"+(e[2]||"")+" "+(e[3]||"")+" "}).join("")}catch(e){return""}}},{name:"Google Scholar",url:"https://scholar.google.com/scholar?q=",img:"custom/01UCD_INST-UCD/img/google-scholar.svg",alt:"Google Scholar Logo",mapping:function(e,t){try{return e.map(function(e){return e.split(",")[2]||""}).join(" ")}catch(e){return""}}}]),e.value("externalSearchText","Can't find what you're looking for? Search items held at other libraries.")}},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};r.loadGoogleAnalytics=function(){angular.module("googleAnalytics",[]),angular.module("googleAnalytics").run(["$rootScope",function(e){var t,r,n;t=window,n=document,r="ga",t.GoogleAnalyticsObject=r,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=+new Date,r=n.createElement("script"),n=n.getElementsByTagName("script")[0],r.async=1,r.src="https://www.google-analytics.com/analytics.js",n.parentNode.insertBefore(r,n),ga("create","UA-65988958-7","auto"),e.$on("$locationChangeSuccess",function(){ga&&ga("send","pageview")})}])},r.trackHathiFinds=function(e,n){if(!ga)return!1;var t=n.children(),r=!0,a=!1,i=void 0;try{for(var o,l=Object.entries(t)[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var c=g(o.value,2),u=(c[0],c[1]);if("hathi-trust-availability"==u.localName){var s=u.getElementsByTagName("a");if(0<s.length){var h=function(){var e=n.nativeElement.querySelector("ga-hathi-load");if(e&&"true"==e.getAttribute("event-sent"))return{v:!0};var t=s[0].getAttribute("href"),r=(0,d.getParameterByName)("query")?(0,d.getParameterByName)("query"):"";return ga("send",{hitType:"event",eventCategory:"Hathi Load",eventAction:t,eventLabel:r}),s[0].addEventListener("click",function(){ga("send","event",{eventCategory:"Hathi Click",eventAction:t,eventLabel:r,transport:"beacon"})}),{v:!0}}();if("object"===(void 0===h?"undefined":f(h)))return h.v}return!1}}}catch(e){a=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw i}}return!1};var d=e("./utils")},{"./utils":6}],3:[function(e,t,r){"use strict";e("primo-explore-external-search"),e("primo-explore-hathitrust-availability");var n=e("./ga"),a=o(e("./external-search")),i=o(e("./search-bar-after")),e=o(e("./search-result-availability-line-after"));function o(e){return e&&e.__esModule?e:{default:e}}(0,n.loadGoogleAnalytics)();window.ucdlibVersion="2.0.0-alpha6";n=angular.module("viewCustom",["angularLoad","hathiTrustAvailability","externalSearch","googleAnalytics"]);(0,a.default)(n),(0,i.default)(n),(0,e.default)(n)},{"./external-search":1,"./ga":2,"./search-bar-after":4,"./search-result-availability-line-after":5,"primo-explore-external-search":7,"primo-explore-hathitrust-availability":9}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){e.component("prmSearchBarAfter",{bindings:{parentCtrl:"<"},controller:"SearchBarAfterController",templateUrl:"custom/01UCD_INST-UCD/html/templates/prmSearchBarAfter.html"}),e.controller("SearchBarAfterController",["$location","$window",function(n,a){this.navigateToHomePage=function(){var e=n.search(),t=e.vid,r=e.lang||"en_US",e=n.absUrl().split("/discovery/");if(1===e.length)return console.log(e[0]+" : Could not detect the view name!"),!1;e=e[0];return a.location.href=e+"/discovery/search?vid="+t+"&lang="+r,!0}}])}},{}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){window.browzine={api:"https://public-api.thirdiron.com/public/v1/libraries/75",apiKey:"c5635332-0b38-4ded-9adc-b16be01f079c",journalCoverImagesEnabled:!0,journalBrowZineWebLinkTextEnabled:!0,journalBrowZineWebLinkText:"View Journal Contents",acticleBrowZineWebLinkTextEnabled:!0,articleBrowZineWebLinkText:"View Issue Contents",articlePDFDownloadLinkEnabled:!0,articlePDFDownloadLinkText:"Download PDF",printRecordsIntegrationEnabled:!0},browzine.script=document.createElement("script"),browzine.script.src="https://s3.amazonaws.com/browzine-adapters/primo/browzine-primo-adapter.js",document.head.appendChild(browzine.script),e.controller("prmSearchResultAvailabilityLineAfterController",["$scope","$element",function(e,t){window.browzine.primo.searchResult(e),this.gaHathiLoad=function(){return(0,n.trackHathiFinds)(e,t)}}]),e.component("prmSearchResultAvailabilityLineAfter",{bindings:{parentCtrl:"<"},controller:"prmSearchResultAvailabilityLineAfterController",template:'<hathi-trust-availability hide-online="true" hide-if-journal="false" ignore-copyright="true"></hathi-trust-availability><ga-hathi-load event-sent="{{$ctrl.gaHathiLoad()}}"></ga-hathi-load>'})};var n=e("./ga")},{"./ga":2}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getParameterByName=function(e,t){t=t||window.location.href;e=e.replace(/[\[\]]/g,"\\$&");t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}},{}],7:[function(e,t,r){e("./js/external-search.module.js"),t.exports="externalSearch"},{"./js/external-search.module.js":8}],8:[function(e,t,r){angular.module("externalSearch",[]).value("searchTargets",[]).value("externalSearchText","").component("prmFacetAfter",{bindings:{parentCtrl:"<"},controller:["externalSearch","$scope",function(e,t){this.$onInit=function(){e.setController(this.parentCtrl),e.addExtSearch(),t.$watch("$ctrl.parentCtrl.facets",function(){e.addExtSearch()})}}]}).component("prmPageNavMenuAfter",{controller:["externalSearch",function(e){this.$onInit=function(){e.getController()&&e.addExtSearch()}}]}).component("prmFacetExactAfter",{bindings:{parentCtrl:"<"},template:'<div ng-if="name === \'External Search\'">          <div ng-hide="$ctrl.parentCtrl.facetGroup.facetGroupCollapsed">              <div class="section-content animate-max-height-variable">                  <div ng-if="introText" id="external-search-intro">{{introText}}</div>                  <div class="md-chips md-chips-wrap">                      <div ng-repeat="target in targets" aria-live="polite" class="md-chip animate-opacity-and-scale facet-element-marker-local4">                          <div class="md-chip-content layout-row" role="button" tabindex="0">                              <strong dir="auto" title="{{ target.name }}">                                  <a ng-href="{{ target.url + target.mapping(queries, filters) }}" target="_blank">                                      <img ng-src="{{ target.img }}" width="22" height="22" alt="{{ target.alt }}" style="vertical-align:middle;"> {{ target.name }}                                  </a>                              </strong>                          </div>                      </div>                  </div>              </div>          </div>      </div>',controller:["$scope","$location","searchTargets","externalSearchText",function(r,n,a,i){this.$onInit=function(){r.name=this.parentCtrl.facetGroup.name,r.targets=a,r.introText=i;var e=n.search().query,t=n.search().pfilter;r.queries="[object Array]"===Object.prototype.toString.call(e)?e:!!e&&[e],r.filters="[object Array]"===Object.prototype.toString.call(t)?t:!!t&&[t]}}]}).factory("externalSearch",function(){return{getController:function(){return this.prmFacetCtrl||!1},setController:function(e){this.prmFacetCtrl=e},addExtSearch:function(e){((e=e||this.prmFacetCtrl).facets.length<1||"External Search"!==e.facets[0].name)&&e.facets.unshift({name:"External Search",displayedType:"exact",limitCount:0,facetGroupCollapsed:!1,values:[]})}}})},{}],9:[function(e,t,r){e("./js/hathi-trust-availability.module.js"),t.exports="hathiTrustAvailability"},{"./js/hathi-trust-availability.module.js":10}],10:[function(e,t,r){angular.module("hathiTrustAvailability",[]).constant("hathiTrustBaseUrl","https://catalog.hathitrust.org/api/volumes/brief/json/").config(["$sceDelegateProvider","hathiTrustBaseUrl",function(e,t){var r=e.resourceUrlWhitelist();r.push(t+"**"),e.resourceUrlWhitelist(r)}]).factory("hathiTrust",["$http","$q","hathiTrustBaseUrl",function(t,l,r){function e(e){if(e.length){e=r+e.join("|");return t.jsonp(e,{cache:!0,jsonpCallbackParam:"callback"}).then(function(e){return e.data})}return l.resolve(null)}var n={};return n.findRecord=function(n){return e(n).then(function(e){for(var t=0;t<n.length;t++){var r=Object.keys(e[n[t]].records)[0];if(r)return l.resolve(e[n[t]].records[r].recordURL)}return l.resolve(null)}).catch(function(e){console.error(e)})},n.findFullViewRecord=function(o){return e(o).then(function(e){for(var t=null,r=0;!t&&r<o.length;r++)for(var n=e[o[r]],a=0;a<n.items.length;a++){var i=n.items[a];if("full view"===i.usRightsString.toLowerCase()){t=n.records[i.fromRecord].recordURL;break}}return l.resolve(t)}).catch(function(e){console.error(e)})},n}]).controller("hathiTrustAvailabilityController",["hathiTrust",function(t){var r=this;r.$onInit=function(){r.msg||(r.msg="Full Text Available at HathiTrust"),r.hideOnline&&i()||r.hideIfJournal&&e()||(r.ignoreCopyright&&!a()&&(r.ignoreCopyright=!1),o())};function n(e){return e.match(/^(\(ocolc\))?\d+$/i)}var e=function(){return!(-1==r.prmSearchResultAvailabilityLine.result.pnx.addata.format[0].toLowerCase().indexOf("journal"))},a=function(){return-1==r.prmSearchResultAvailabilityLine.result.delivery.availability[0].toLowerCase().indexOf("unavailable")},i=function(){var e=r.prmSearchResultAvailabilityLine.result.delivery||[];return e.GetIt1?r.prmSearchResultAvailabilityLine.result.delivery.GetIt1.some(function(e){return e.links.some(function(e){return e.isLinktoOnline})}):-1!==e.deliveryCategory.indexOf("Alma-E")},o=function(){var e=(r.prmSearchResultAvailabilityLine.result.pnx.addata.oclcid||[]).filter(n).map(function(e){return"oclc:"+e.toLowerCase().replace("(ocolc)","")});t[r.ignoreCopyright?"findRecord":"findFullViewRecord"](e).then(function(e){e&&(r.fullTextLink=(e=e,r.entityId?e+"?signon=swle:"+r.entityId:e))})}}]).component("hathiTrustAvailability",{require:{prmSearchResultAvailabilityLine:"^prmSearchResultAvailabilityLine"},bindings:{entityId:"@",ignoreCopyright:"<",hideIfJournal:"<",hideOnline:"<",msg:"@?"},controller:"hathiTrustAvailabilityController",template:'<span ng-if="$ctrl.fullTextLink" class="umnHathiTrustLink">                <md-icon alt="HathiTrust Logo">                  <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">  <image id="image0" width="16" height="16" x="0" y="0"                  xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAACBjSFJN                  AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACNFBMVEXuegXvegTsewTveArw                  eQjuegftegfweQXsegXweQbtegnsegvxeQbvegbuegbvegbveQbtegfuegbvegXveQbvegbsfAzt                  plfnsmfpq1/wplPuegXvqFrrq1znr2Ptok/sewvueQfuegbtegbrgRfxyJPlsXDmlTznnk/rn03q                  pVnomkjnlkDnsGnvwobsfhPveQXteQrutHDqpF3qnUnpjS/prmDweQXsewjvrWHsjy7pnkvqqGDv                  t3PregvqhB3uuXjusmzpp13qlz3pfxTskC3uegjsjyvogBfpmkHpqF/us2rttXLrgRjrgBjttXDo                  gx/vtGznjzPtfhHqjCfuewfrjCnwfxLpjC7wtnDogBvssmjpfhLtegjtnEjrtnTmjC/utGrsew7s                  o0zpghnohB/roUrrfRHtsmnlkTbrvH3tnEXtegXvegTveQfqhyHvuXjrrGTpewrsrmXqfRHogRjt                  q2Dqewvqql/wu3vqhyDueQnwegXuegfweQPtegntnUvnt3fvxI7tfhTrfA/vzJvmtXLunEbtegrw                  egTregzskjbsxI/ouoPsqFzniyrz2K3vyZnokDLpewvtnkv30J/w17XsvYXjgBbohR7nplnso1L0                  1Kf40Z/um0LvegXngBnsy5juyJXvsGftrGTnhB/opVHoew7qhB7rzJnnmErkkz3splbqlT3smT3t                  tXPqqV7pjzHvunjrfQ7vewPsfA7uoU3uqlruoEzsfQ/vegf///9WgM4fAAAAFHRSTlOLi4uLi4uL                  i4uLi4uLi4tRUVFRUYI6/KEAAAABYktHRLvUtndMAAAAB3RJTUUH4AkNDgYNB5/9vwAAAQpJREFU                  GNNjYGBkYmZhZWNn5ODk4ubh5WMQERUTl5CUEpWWkZWTV1BUYlBWUVVT19BUUtbS1tHV0zdgMDQy                  NjE1MzRXsrC0sraxtWOwd3B0cnZxlXZz9/D08vbxZfDzDwgMCg4JdQsLj4iMio5hiI2LT0hMSk5J                  TUvPyMzKzmHIzcsvKCwqLiktK6+orKquYZCuratvaGxqbmlta+8QNRBl6JQ26Oru6e3rnzBx0uQ8                  aVGGvJopU6dNn1E8c9bsOXPniYoySM+PXbBw0eIlS5fl1C+PFRFlEBUVXbFy1eo1a9fliQDZYIHY                  9fEbNm7avEUUJiC6ddv2HTt3mSuBBfhBQEBQSEgYzOIHAHtfTe/vX0uvAAAAJXRFWHRkYXRlOmNy                  ZWF0ZQAyMDE2LTA5LTEzVDE0OjA2OjEzLTA1OjAwNMgVqAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAx                  Ni0wOS0xM1QxNDowNjoxMy0wNTowMEWVrRQAAAAASUVORK5CYII=" />                  </svg>                 </md-icon>                <a target="_blank" ng-href="{{$ctrl.fullTextLink}}">                {{ ::$ctrl.msg }}                  <prm-icon external-link="" icon-type="svg" svg-icon-set="primo-ui" icon-definition="open-in-new"></prm-icon>                </a>              </span>'})},{}]},{},[3]);
//# sourceMappingURL=custom.js.map
